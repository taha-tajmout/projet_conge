
<div class="container mt-4">
  <div class="header-section">
    <h2 class="mb-4">ğŸ“‹ Demandes ValidÃ©es par le Directeur</h2>
    <p class="text-muted">Liste des demandes de congÃ© approuvÃ©es dÃ©finitivement</p>
  </div>

  <!-- Ã‰tat de chargement -->
  <div *ngIf="isLoading" class="text-center py-4">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Chargement...</span>
    </div>
    <p class="mt-2">Chargement des demandes validÃ©es...</p>
  </div>

  <!-- Message d'erreur -->
  <div *ngIf="errorMessage" class="alert alert-danger">
    <i class="fas fa-exclamation-triangle"></i>
    {{ errorMessage }}
  </div>

  <!-- Message si aucune demande -->
  <div *ngIf="!isLoading && demandesValidees.length === 0 && !errorMessage" class="alert alert-info">
    <i class="fas fa-info-circle"></i>
    Aucune demande validÃ©e disponible pour le moment.
  </div>

  <!-- Statistiques -->
  <div *ngIf="!isLoading && demandesValidees.length > 0" class="stats-section mb-4">
    <div class="card">
      <div class="card-body">
        <h5 class="card-title">ğŸ“Š Statistiques</h5>
        <p class="card-text">
          <strong>{{ demandesValidees.length }}</strong> demandes validÃ©es au total
        </p>
      </div>
    </div>
  </div>

  <!-- Tableau des demandes -->
  <div *ngIf="!isLoading && demandesValidees.length > 0" class="table-responsive">
    <table class="table table-striped table-hover">
      <thead class="table-dark">
        <tr>
         
          <th scope="col">ğŸ‘¤ Demandeur</th>
          <th scope="col">ğŸ“‹ Type</th>
          <th scope="col">ğŸ“… PÃ©riode</th>
          <th scope="col">â±ï¸ DurÃ©e</th>
          <th scope="col">ğŸ‘¥ IntÃ©rimaire</th>
          <th scope="col">âœ… Statut</th>
          <th scope="col">ğŸ”§ Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let demande of demandesValidees; let i = index">
         
          <td>
            <strong>{{ demande.nomDemandeur }}</strong>
            <br>
            <small class="text-muted">Mat: {{ demande.matricule }}</small>
          </td>
          <td>
            <span class="badge" 
                  [ngClass]="{
                    'bg-success': demande.typeDemande === 'administratif',
                    'bg-warning': demande.typeDemande === 'maladie',
                    'bg-info': demande.typeDemande === 'maternite',
                    'bg-primary': demande.typeDemande !== 'administratif' && demande.typeDemande !== 'maladie' && demande.typeDemande !== 'maternite'
                  }">
              {{ demande.typeDemande | titlecase }}
            </span>
          </td>
          <td>
            <div class="date-range">
              <small class="text-muted">Du</small> {{ demande.dateDebut | date:'dd/MM/yyyy' }}
              <br>
              <small class="text-muted">Au</small> {{ demande.dateFin | date:'dd/MM/yyyy' }}
            </div>
          </td>
          <td>
            <span class="badge bg-light text-dark">
              {{ demande.duree }} jour(s)
            </span>
          </td>
          <td>
            <span *ngIf="demande.interime && demande.interime !== 'null'; else noInterim">
              {{ demande.interime }}
            </span>
            <ng-template #noInterim>
              <span class="text-muted">Non spÃ©cifiÃ©</span>
            </ng-template>
          </td>
          <td>
            <span class="badge bg-success">
              <i class="fas fa-check-circle"></i>
              {{ demande.statut }}
            </span>
          </td>
          <td>
            <div class="btn-group" role="group">
              <button 
                class="btn btn-sm btn-primary" 
                (click)="exporterPDF(demande)"
                title="Exporter en PDF">
                <i class="fas fa-file-pdf"></i>
               exporter PDF
              </button>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  
  <div class="mt-4">
    <button class="btn btn-secondary" (click)="retourDashboard()">
      <i class="fas fa-arrow-left"></i>
      Retour au tableau de bord
    </button>
  </div>
</div>