<div class="container">
  <!-- En-tête moderne -->
  <h2>
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" style="margin-right: 0.75rem; vertical-align: middle;">
      <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z" fill="#2d5c3e"/>
    </svg>
    Demandes en attente
  </h2>
  
  <div class="table-container">
    <table class="table">
      <thead>
        <tr>
          <th>
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" style="margin-right: 0.5rem; vertical-align: middle;">
              <path d="M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2ZM21 9V7L15 1C14.2 1 13.8 1.7 14.4 2.3L18.7 6.6C19.3 7.2 18.9 8 18.1 8H5.9C5.1 8 4.7 7.2 5.3 6.6L9.6 2.3C10.2 1.7 9.8 1 9 1L3 7V9H21ZM12 8C13.7 8 15 9.3 15 11V22H21V11C21 9.3 19.7 8 18 8C16.3 8 15 9.3 15 11V22H9V11C9 9.3 10.3 8 12 8Z" fill="white"/>
            </svg>
            Demandeur
          </th>
          <th>
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" style="margin-right: 0.5rem; vertical-align: middle;">
              <path d="M9 11H7V9H9V11ZM13 11H11V9H13V11ZM17 11H15V9H17V11ZM19 3H18V1H16V3H8V1H6V3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM19 19H5V8H19V19Z" fill="white"/>
            </svg>
            Type
          </th>
          <th>Date début</th>
          <th>Date fin</th>
          <th>Durée</th>
          <th>
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" style="margin-right: 0.5rem; vertical-align: middle;">
              <path d="M12 8C9.79 8 8 9.79 8 12S9.79 16 12 16 16 14.21 16 12 14.21 8 12 8ZM12 2C6.48 2 2 6.48 2 12S6.48 22 12 22 22 17.52 22 12 17.52 2 12 2ZM12 20C7.58 20 4 16.42 4 12S7.58 4 12 4 20 7.58 20 12 16.42 20 12 20Z" fill="white"/>
            </svg>
            Actions
          </th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let demande of demandes">
          <td>
            <strong>{{ demande.nomDemandeur }}</strong>
          </td>
          <td>
            <span class="status-badge status-pending">
              {{ demande.typeDemande }}
            </span>
          </td>
          <td>{{ demande.dateDebut | date:'dd/MM/yyyy' }}</td>
          <td>{{ demande.dateFin | date:'dd/MM/yyyy' }}</td>
          <td>
            <strong>{{ demande.duree }} jours</strong>
          </td>
          <td>
            <button class="btn-manage" (click)="openModal(demande)">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                <path d="M12 2C6.48 2 2 6.48 2 12S6.48 22 12 22 22 17.52 22 12 17.52 2 12 2ZM17 13H13V17H11V13H7V11H11V7H13V11H17V13Z" fill="white"/>
              </svg>
              Gérer
            </button>
          </td>
        </tr>
        <tr *ngIf="demandes.length === 0" class="empty-row">
          <td colspan="6">
            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" style="margin: 1rem 0; opacity: 0.5;">
              <path d="M12 2C6.48 2 2 6.48 2 12S6.48 22 12 22 22 17.52 22 12 17.52 2 12 2ZM13 17H11V15H13V17ZM13 13H11V7H13V13Z" fill="#6c757d"/>
            </svg>
            <br>
            <strong>Aucune demande en attente</strong>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<div *ngIf="showModal" class="modal-overlay">
  <div class="modal-container">
    <!-- En-tête de la modal -->
    <div style="padding: 1rem 1.5rem; background: linear-gradient(135deg, #2d5c3e, #4a8759); color: white; border-bottom: 1px solid #e0e6ed; position: relative;">
      <h3 style="display: flex; align-items: center; gap: 0.5rem; margin: 0; font-size: 1rem; font-weight: 600;">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
          <path d="M12 2C6.48 2 2 6.48 2 12S6.48 22 12 22 22 17.52 22 12 17.52 2 12 2ZM17 13H13V17H11V13H7V11H11V7H13V11H17V13Z" fill="white"/>
        </svg>
        Gérer la demande
      </h3>
      <!-- Bouton fermer en haut à droite -->
      <button class="btn-close-x" (click)="closeModal()">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
          <path d="M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41Z" fill="white"/>
        </svg>
      </button>
    </div>
    
    <div class="modal-content">
      <div class="modal-row">
        <span class="modal-label">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" style="margin-right: 0.5rem; vertical-align: middle;">
            <path d="M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2Z" fill="#2d5c3e"/>
          </svg>
          Demandeur:
        </span>
        <span style="color: #2c3e50; font-weight: 600;">{{ currentDemande?.nomDemandeur }}</span>
      </div>
      
      <div class="modal-row">
        <span class="modal-label">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" style="margin-right: 0.5rem; vertical-align: middle;">
            <path d="M9 11H7V9H9V11ZM13 11H11V9H13V11ZM17 11H15V9H17V11ZM19 3H18V1H16V3H8V1H6V3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3Z" fill="#2d5c3e"/>
          </svg>
          Type:
        </span>
        <span class="status-badge status-pending">{{ currentDemande?.typeDemande }}</span>
      </div>
      
      <div class="modal-row">
        <span class="modal-label">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" style="margin-right: 0.5rem; vertical-align: middle;">
            <path d="M9 11H7V9H9V11ZM13 11H11V9H13V11ZM17 11H15V9H17V11ZM19 3H18V1H16V3H8V1H6V3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM19 19H5V8H19V19Z" fill="#2d5c3e"/>
          </svg>
          Période:
        </span>
        <span style="color: #2c3e50; font-weight: 500;">
          {{ currentDemande?.dateDebut | date:'dd/MM/yyyy' }} - {{ currentDemande?.dateFin | date:'dd/MM/yyyy' }}
        </span>
      </div>
      
      <div class="modal-row">
        <span class="modal-label">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" style="margin-right: 0.5rem; vertical-align: middle;">
            <path d="M12 2C6.48 2 2 6.48 2 12S6.48 22 12 22 22 17.52 22 12 17.52 2 12 2ZM13 17H11V15H13V17ZM13 13H11V7H13V13Z" fill="#2d5c3e"/>
          </svg>
          Durée:
        </span>
        <span style="color: #2c3e50; font-weight: 600;">{{ currentDemande?.duree }} jours</span>
      </div>
    </div>

    <div class="action-buttons">
      <button class="btn-accept" (click)="executeAcceptDemande()">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
          <path d="M9 16.2L4.8 12L3.4 13.4L9 19L21 7L19.6 5.6L9 16.2Z" fill="white"/>
        </svg>
        Accepter la demande
      </button>
      
      <button class="btn-reject" (click)="executeRejectDemande()">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
          <path d="M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41Z" fill="white"/>
        </svg>
        Refuser la demande
      </button>
    </div>
  </div>
</div>